{% extends "base.html" %}

{% block content %}

    <h1>AIR Protocol Converter</h1>

    <button id="startBtn">Start Recording</button>
    <button id="stopBtn" disabled>Stop Recording</button>
    <button id="sendBtn" disabled>Generate Protocol</button>

    <div class="audio-container">
      <audio id="audioPlayer" controls>Your browser does not support the audio element.</audio>
    </div>

    <div class="middle-container" 
      style="
        display: flex; 
        justify-content: center; 
        align-items: center; 
        width: 80%; 
        height: 33vh; 
        gap: 20px; 
        margin: 0 auto;">

        <div class="output-container" 

          style="
            flex: 1; 
            text-align: center; 
            background: rgba(255, 255, 255, 0.1); 
            border: 2px solid #e74c3c; 
            border-radius: 8px; 
            padding: 15px;
            display: flex;
            justify-content: center;  
            align-items: center;      
            ;">


            <h2>Final Transcription</h2>

            <pre id="output" 
              style="
                width: 100%; 
                height: 100px; 
                background: rgba(255, 255, 255, 0.1); 
                border: 2px solid #e74c3c; 
                color: white;
                display: table;
                max-width: 80%;
                height: auto;  
                word-wrap: break-word;  
                white-space: normal;  
                "></pre>

        </div>

        <div class="output-container" 
          style="
            flex: 1; 
            text-align: center; 
            background: rgba(255, 255, 255, 0.1); 
            border: 2px solid #e74c3c; 
            border-radius: 8px; 
            padding: 15px;">

            <h2>Currently Hearing...</h2>
            <pre id="interimOutput">Interim transcription</pre>

        </div>
    </div>

    <div class="bottom-container" 
      style="
        display: flex; 
        justify-content: center; 
        align-items: center; 
        width: 80%; 
        margin: 0 auto;">

        <div class="output-container" id="LLMoutput" 
          style="
            text-align: center; 
            width: 100%; 
            background: rgba(255, 255, 255, 0.1); 
            border: 2px solid #e74c3c; 
            border-radius: 8px; 
            padding: 15px;">

            <h2>Generated Protocol</h2>
            <pre></pre>

        </div>
    </div>

    <div class="footer" style="position: absolute; bottom: 20px; width: 100%; text-align: center;">

    <p class="note">Click "Start Recording" to begin speaking</p>
    <p class="note">This tool will not work on Firefox, and may not work on less common browsers</p>
    <p class="note">It is recommended to use Google, but as long as your browser supports audio transcription with Web Speech API it will be fine</p>

</div>

    <script src="{{ url_for('static', filename='AudioRecorder.js') }}"></script>
    <script src="{{ url_for('static', filename='TranscriptionEndpoint.js') }}"></script>
{% endblock %}
